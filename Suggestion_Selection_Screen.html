<!-- Author: Sean Tan
     UCID: 30094560     
-->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Suggestion Selection</title>
        <style>
            body {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
                background-color: #f0f0f0;
                font-family: Verdana, sans-serif;
                overflow-y: auto;
            }

            .app-container {
                width: 375px; /* fixed mobile app width */
                height: 667px; /* fixed mobile app height */
                background-color: white;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                padding: 20px;
                text-align: center;
                position: relative;
                display: flex;
                flex-direction: column;

            }

            #events-container {
                height: 275px; /* set height of events container to avoid collision with continue button */
                overflow-y: auto;
                margin-top: 20px;
                padding-right: 10px;
            }

            .breadcrumb {
                display: flex;
                list-style: none;
                padding: 0;
                margin: 0 0 20px 0; /* add bottom margin to separate from content */
                width: 100%;
            
            }
            .breadcrumb li {
                margin-right: 5px;
            }
            .breadcrumb li+li:before {
                content: ">";
                margin-right: 5px;
            }
            .button-container {
                position: absolute;
                bottom: 80px; /* adjusted to make space for the navbar */
                right: 20px;
                display: flex;
                justify-content: center;
                margin-top: 20px;
            }
            button {
                padding: 10px 20px;
                background-color: #c81d25;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
            .breadcrumb li {
                font-size: 13px;
            }
            .app-container h2 {
                align-self: flex-start; /* align the h2 element to the start */
                margin-top: 60px;
            }
            .app-container h4 {
                margin-top: 0; /* remove top margin to align with h2 */
                align-self: flex-start; /* align the h5 element to the start */
            }
            .navbar {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                background-color: #c81d25;
                display: flex;
                justify-content: space-around;
                padding: 10px 0;
            }
            .navbar button {
                background-color: transparent;
                color: white;
                border: none;
                cursor: pointer;
                font-size: 16px;
            }
            .tag-container {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
            }
            .app-container select{
                margin-bottom: 80px;
            }
            .collapsible {
                cursor: pointer;
                padding: 18px;
                width: 100%;
                border: none;
                text-align: left;
                outline: none;
                font-size: 15px;
                margin-bottom: 10px;
                background-color: #c81d25;
                border-radius: 5px;
            }
            .active, .collapsible:hover {
                background-color: #ddd;
            }
            .back-button {
                width: 40px; /* adjust the size of the image */
                height: 40px;
                cursor: pointer; /* make it look clickable */
                border: none; /* remove any border */
                background: none; /* ensure no background is applied */
                outline: none; /* remove focus outline */
            }

            .back-button-container {
                position: absolute;
                top: 60px;
                left: 20px;
            }

            .app-container select{
                margin-bottom: 5px;
            }

            .add-event {
                width: 50%;
                height: 25px;
                margin-bottom: 10px;
                background-color: #007bff;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .info-box {
                padding: 10px;
                margin-top: 5px;
                background-color: #f9f9f9;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-size: 14px;
                display: none; /* initially hidden */
            }

            select {
                margin-bottom: 10px; /* reduce the bottom margin of the dropdown */
            }

            #selected-date {
                margin-top: 5px; /* reduce the top margin of the date label */
            }

        </style>
    </head>
    <body>
        <div class="app-container">
            <ul class="breadcrumb">
                <li><a href="#">Home</a></li>
                <li><a href="#">Start Planning</a></li>
                <li><a href="#">Tags</a></li>
                <li>Suggestions</li>
            </ul>
            <div class="back-button-container">
                <img src="https://img.icons8.com/ios/50/circled-left-2.png" alt="Back" class="back-button" onclick="backButtonAction()" />
            </div>

            <h2>Select Date</h2>

            <select name="dropdown-list" id="date-dropdown" onchange="updateDateLabelAndEvents()">
                <option value="Sunday, February 13th">Sunday, February 13th</option>
                <option value="Monday, February 14th">Monday, February 14th</option>
                <option value="Tuesday, February 15th">Tuesday, February 15th</option>
            </select>

            

            <h2 id="selected-date">Sunday, February 13th</h2>
            <h4><i>Here are some suggestions!</i></h4>

            <div id="events-container">
                <!-- the updateDateLabelandEvents() function populates this container -->
            </div>
            
            <div class="button-container">
                <button onclick="submitData()">Continue</button>
            </div>


        

            <div class="navbar">
                <button onclick="navigateTo('Homepage_Screen.html')">Home</button>
                <button onclick="navigateTo('Trips_Tab.html')">Trips</button>
                <button onclick="navigateTo('Ticket.html')">Tickets</button>
            </div>
        </div>
    </body>

</html>

<script>

    let selectedSuggestions = {
        "Sunday, February 13th": [],
        "Monday, February 14th": [],
        "Tuesday, February 15th": []
    };

    // function to move to the specified page
    function navigateTo(page) {
        // move to the specified page
        window.location.href = page;
    }

    

    // initialize the events data for each date
    const eventsData = {
        "Sunday, February 13th": [
            { name: "Pancake Breakfast", time: "9AM-11AM", details: "Enjoy a delicious pancake breakfast with fresh fruit and coffee." },
            { name: "TELUS Spark", time: "10AM-5PM", details: "Explore interactive science exhibits and activities." },
            { name: "Calgary Tower", time: "10AM-9PM", details: "Take in breathtaking views of the city from the observation deck." },
            { name: "Clear Nordic Spa", time: "9AM-5PM", details: "Relax and rejuvenate at the Nordic spa with hot and cold pools." }
        ],
        "Monday, February 14th": [
            { name: "Romantic Dinner", time: "6PM-9PM", details: "A candlelit dinner with a special Valentine's Day menu." },
            { name: "Movie Night", time: "8PM-10PM", details: "Watch a romantic movie at the local theater." },
            { name: "Art Gallery Visit", time: "10AM-4PM", details: "Explore beautiful art exhibits at the gallery." },
            { name: "Ice Skating", time: "1PM-3PM", details: "Enjoy ice skating at the outdoor rink." }
        ],
        "Tuesday, February 15th": [
            { name: "Hiking Trip", time: "7AM-12PM", details: "A guided hike through scenic trails." },
            { name: "Museum Tour", time: "10AM-3PM", details: "Discover history and artifacts at the museum." },
            { name: "Cooking Class", time: "5PM-8PM", details: "Learn to cook a gourmet meal with a professional chef." },
            { name: "Stargazing", time: "9PM-11PM", details: "Observe the night sky with telescopes and expert guides." }
        ]
    };


    // function to update the date label and events/suggestion listed based on the selected date in the dropdown menu
    function updateDateLabelAndEvents() {
        const dropdown = document.getElementById("date-dropdown");
        const selectedDate = dropdown.value;

        // update the date label
        const dateLabel = document.getElementById("selected-date");
        dateLabel.textContent = selectedDate;

        // update the events
        const eventsContainer = document.getElementById("events-container");
        // clear existing events
        eventsContainer.innerHTML = "";


        const events = eventsData[selectedDate];

        // iterate through the events and create buttons for each event
        events.forEach((event, index) => {
            // create a button for the event
            const button = document.createElement("button");
            button.type = "button";
            button.className = "collapsible";
            button.innerHTML = `${event.name} <span style="font-size: 12px;">(${event.time})</span>`;
            button.onclick = () => toggleInfoBox(`info-box-${index}`);

            // create the info box for the event
            const infoBox = document.createElement("div");
            infoBox.id = `info-box-${index}`;
            infoBox.className = "info-box";
            infoBox.style.display = "none"; // Initially hidden
            infoBox.innerHTML = `
                <p><strong>Details:</strong> ${event.details}</p>
                <button onclick="toggleSelection('${selectedDate}', '${event.name}', this)">Select</button>
            `;

            // append the button and info box to the container
            eventsContainer.appendChild(button);
            eventsContainer.appendChild(infoBox);
        });
    }

    // function to handle infobox toggle/functionality
    function toggleInfoBox(id) {
        const infoBox = document.getElementById(id);
        if (infoBox.style.display === "none" || infoBox.style.display === "") {
            infoBox.style.display = "block";
        } else {
            infoBox.style.display = "none";
        }
        
    }

    // function to handle the infobox suggestion selection/deselection
    function toggleSelection(date, eventName, button) {
        const list = selectedSuggestions[date];
        const index = list.indexOf(eventName);
        if (index === -1) {
            list.push(eventName);
            button.textContent = "Deselect";
            button.style.backgroundColor = "#555";
        } else {
            list.splice(index, 1);
            button.textContent = "Select";
            button.style.backgroundColor = "#c81d25";
        }
    }

    // function to send data to next page through localStorage
    function submitData() {
        localStorage.setItem("selectedSuggestions", JSON.stringify(selectedSuggestions));
        console.log("Selected Suggestions:", selectedSuggestions);
        // UN COMMENT THIS WHEN READY TO ACTUALLY MOVE PAGES
        //navigateTo("Trip_Timeline.html");
    }

    // when the page loads, set the default date and update the events
    updateDateLabelAndEvents();
</script>